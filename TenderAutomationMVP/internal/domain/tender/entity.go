// =====================================================================
// üèõÔ∏è –î–û–ú–ï–ù–ù–ê–Ø –°–£–©–ù–û–°–¢–¨ TENDER - –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –±–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª—å —Å–∏—Å—Ç–µ–º—ã
// =====================================================================
//
// –ü–∞–∫–µ—Ç tender —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–æ–º–µ–Ω–Ω—É—é –º–æ–¥–µ–ª—å —Ç–µ–Ω–¥–µ—Ä–∞ - –æ—Å–Ω–æ–≤–Ω—É—é —Å—É—â–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.
// –≠—Ç–∞ —Å—É—â–Ω–æ—Å—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ–Ω–¥–µ—Ä –Ω–∞ –∑–∞–∫—É–ø–∫—É –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è.
//
// –ü–†–ò–ù–¶–ò–ü–´ CLEAN ARCHITECTURE:
// 1. –°–æ–¥–µ—Ä–∂–∏—Ç –¢–û–õ–¨–ö–û –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É, –Ω–∏–∫–∞–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º
// 2. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
// 3. –ù–µ –∑–Ω–∞–µ—Ç –æ –±–∞–∑–∞—Ö –¥–∞–Ω–Ω—ã—Ö, API, UI –∏–ª–∏ –¥—Ä—É–≥–∏—Ö —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –¥–µ—Ç–∞–ª—è—Ö
// 4. –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ
// 5. –ò–∑–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –±–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
//
// TODO: –ü—Ä–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–æ–±–∞–≤–∏—Ç—å:
// - –î–æ–º–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (TenderCreated, TenderAnalyzed –∏ —Ç.–¥.)
// - –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω—É—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏
// - –ê–≥—Ä–µ–≥–∞—Ç—ã –¥–ª—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π (Products, Documents)
// - Value Objects –¥–ª—è —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª–µ–π

package tender

import (
	"fmt"
	"net/url"
	"strings"
	"time"

	"github.com/google/uuid"
)

// =====================================================================
// üìä –û–°–ù–û–í–ù–ê–Ø –î–û–ú–ï–ù–ù–ê–Ø –°–£–©–ù–û–°–¢–¨ TENDER
// =====================================================================

// Tender –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ–Ω–¥–µ—Ä –Ω–∞ –∑–∞–∫—É–ø–∫—É —Ç–æ–≤–∞—Ä–æ–≤/—É—Å–ª—É–≥
//
// TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â—É—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É:
// 1. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
// 2. –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ–ª—å–∑—è –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–π —Ç–µ–Ω–¥–µ—Ä)
// 3. –í—ã—á–∏—Å–ª—è–µ–º—ã–µ –ø–æ–ª—è (DaysUntilDeadline, IsExpired –∏ —Ç.–¥.)
// 4. –ú–µ—Ç–æ–¥—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è (SetAIAnalysis, MarkAsAnalyzed)
// 5. –ü—Ä–æ–≤–µ—Ä–∫–∏ –±–∏–∑–Ω–µ—Å-–∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
//
// –í–ê–ñ–ù–û: –≠—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ù–ï –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–µ–≥–∏ –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (json, db),
// —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –∑–æ–Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–ª–æ–µ–≤ (interfaces, infrastructure)
type Tender struct {
	// üîë –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
	ID         uint   // –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID –≤ –Ω–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ
	ExternalID string // ID —Ç–µ–Ω–¥–µ—Ä–∞ –Ω–∞ –≤–Ω–µ—à–Ω–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ (zakupki.gov.ru –∏ —Ç.–¥.)

	// üìù –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
	Title       string // –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–Ω–¥–µ—Ä–∞
	Description string // –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

	// üåê –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏—Å—Ç–æ—á–Ω–∏–∫–µ
	Platform string // –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞-–∏—Å—Ç–æ—á–Ω–∏–∫ (zakupki, szvo, spb)
	URL      string // –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ç–µ–Ω–¥–µ—Ä

	// üë§ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑—á–∏–∫–µ
	Customer    string // –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑—á–∏–∫–∞
	CustomerINN string // –ò–ù–ù –∑–∞–∫–∞–∑—á–∏–∫–∞

	// üí∞ –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
	StartPrice float64  // –ù–∞—á–∞–ª—å–Ω–∞—è (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è) —Ü–µ–Ω–∞
	Currency   Currency // –í–∞–ª—é—Ç–∞ —Ç–µ–Ω–¥–µ—Ä–∞

	// üìÖ –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏
	PublishedAt time.Time  // –î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Ç–µ–Ω–¥–µ—Ä–∞
	DeadlineAt  *time.Time // –ö—Ä–∞–π–Ω–∏–π —Å—Ä–æ–∫ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫

	// üè∑Ô∏è –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
	Status   TenderStatus // –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Ç–µ–Ω–¥–µ—Ä–∞
	Category string       // –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–æ–≤–∞—Ä–æ–≤/—É—Å–ª—É–≥

	// ü§ñ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã AI –∞–Ω–∞–ª–∏–∑–∞
	AIScore            *float64         // –û—Ü–µ–Ω–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (0.0-1.0)
	AIRecommendation   *AIRecommendation // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è AI
	AIAnalysisReason   string           // –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è AI
	AIAnalyzedAt       *time.Time       // –í—Ä–µ–º—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞

	// üìä –°–ª—É–∂–µ–±–Ω—ã–µ –ø–æ–ª—è
	CreatedAt time.Time // –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏
	UpdatedAt time.Time // –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
}

// =====================================================================
// üè∑Ô∏è –î–û–ú–ï–ù–ù–´–ï –≠–ù–£–ú–´ –ò VALUE OBJECTS
// =====================================================================

// TenderStatus –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã —Ç–µ–Ω–¥–µ—Ä–∞
//
// TODO: –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —Å—Ç–∞—Ç—É—Å–∞–º–∏
// TODO: –î–æ–±–∞–≤–∏—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤
type TenderStatus string

const (
	StatusActive    TenderStatus = "active"    // –ê–∫—Ç–∏–≤–Ω—ã–π —Ç–µ–Ω–¥–µ—Ä (–∏–¥–µ—Ç –ø—Ä–∏–µ–º –∑–∞—è–≤–æ–∫)
	StatusCompleted TenderStatus = "completed" // –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π —Ç–µ–Ω–¥–µ—Ä
	StatusCancelled TenderStatus = "cancelled" // –û—Ç–º–µ–Ω–µ–Ω–Ω—ã–π —Ç–µ–Ω–¥–µ—Ä
	StatusExpired   TenderStatus = "expired"   // –ò—Å—Ç–µ–∫—à–∏–π —Ç–µ–Ω–¥–µ—Ä
	StatusDraft     TenderStatus = "draft"     // –ß–µ—Ä–Ω–æ–≤–∏–∫ (–µ—â–µ –Ω–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω)
)

// AIRecommendation –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é AI –ø–æ —É—á–∞—Å—Ç–∏—é –≤ —Ç–µ–Ω–¥–µ—Ä–µ
//
// TODO: –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "high_priority", "low_priority")
// TODO: –î–æ–±–∞–≤–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
type AIRecommendation string

const (
	RecommendationParticipate AIRecommendation = "participate" // –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å
	RecommendationSkip        AIRecommendation = "skip"        // –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ç–µ–Ω–¥–µ—Ä
	RecommendationAnalyze     AIRecommendation = "analyze"     // –¢—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
)

// Currency –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –≤–∞–ª—é—Ç—É —Ç–µ–Ω–¥–µ—Ä–∞
//
// TODO: –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–∞–ª—é—Ç
// TODO: –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –≤–∞–ª—é—Ç
type Currency string

const (
	CurrencyRUB Currency = "RUB" // –†–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—É–±–ª—å
	CurrencyUSD Currency = "USD" // –î–æ–ª–ª–∞—Ä –°–®–ê
	CurrencyEUR Currency = "EUR" // –ï–≤—Ä–æ
)

// Platform –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—É-–∏—Å—Ç–æ—á–Ω–∏–∫ —Ç–µ–Ω–¥–µ—Ä–∞
//
// TODO: –í—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π value object —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
// TODO: –î–æ–±–∞–≤–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
type Platform string

const (
	PlatformZakupki Platform = "zakupki" // zakupki.gov.ru
	PlatformSZVO    Platform = "szvo"    // szvo.gov35.ru
	PlatformSPB     Platform = "spb"     // gz-spb.ru
)

// =====================================================================
// üèóÔ∏è –ö–û–ù–°–¢–†–£–ö–¢–û–† –ò –ú–ï–¢–û–î–´ –°–û–ó–î–ê–ù–ò–Ø
// =====================================================================

// NewTender —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —Ç–µ–Ω–¥–µ—Ä —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
//
// TODO: –î–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
// TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω Builder –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ —Å–æ–∑–¥–∞–Ω–∏—è
// TODO: –î–æ–±–∞–≤–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–º–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π (TenderCreated)
//
// –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
//   - externalID: —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –Ω–∞ –≤–Ω–µ—à–Ω–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
//   - title: –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–Ω–¥–µ—Ä–∞
//   - platform: –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞-–∏—Å—Ç–æ—á–Ω–∏–∫
//   - url: —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ç–µ–Ω–¥–µ—Ä
//
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
//   - *Tender: —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ç–µ–Ω–¥–µ—Ä
//   - error: –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
func NewTender(externalID, title, platform, url string) (*Tender, error) {
	// TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
	if err := validateExternalID(externalID); err != nil {
		return nil, fmt.Errorf("invalid external ID: %w", err)
	}

	if err := validateTitle(title); err != nil {
		return nil, fmt.Errorf("invalid title: %w", err)
	}

	if err := validatePlatform(platform); err != nil {
		return nil, fmt.Errorf("invalid platform: %w", err)
	}

	if err := validateURL(url); err != nil {
		return nil, fmt.Errorf("invalid URL: %w", err)
	}

	now := time.Now()

	tender := &Tender{
		ExternalID:  externalID,
		Title:       strings.TrimSpace(title),
		Platform:    platform,
		URL:         url,
		Status:      StatusActive,
		Currency:    CurrencyRUB, // –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
		CreatedAt:   now,
		UpdatedAt:   now,
		PublishedAt: now, // TODO: –ü–æ–ª—É—á–∞—Ç—å –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
	}

	// TODO: –î–æ–±–∞–≤–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–º–µ–Ω–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è TenderCreated
	// TODO: –î–æ–±–∞–≤–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ UUID –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

	return tender, nil
}

// =====================================================================
// üîç –ú–ï–¢–û–î–´ –ó–ê–ü–†–û–°–û–í (QUERY METHODS)
// =====================================================================

// IsActive –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –∞–∫—Ç–∏–≤–µ–Ω –ª–∏ —Ç–µ–Ω–¥–µ—Ä –¥–ª—è –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫
//
// TODO: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞)
// TODO: –£—á–∏—Ç—ã–≤–∞—Ç—å —Ä–∞–±–æ—á–∏–µ –¥–Ω–∏ –∏ —á–∞—Å—ã –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
func (t *Tender) IsActive() bool {
	if t.Status != StatusActive {
		return false
	}

	// –ï—Å–ª–∏ –¥–µ–¥–ª–∞–π–Ω –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, —Å—á–∏—Ç–∞–µ–º —á—Ç–æ —Ç–µ–Ω–¥–µ—Ä –∞–∫—Ç–∏–≤–µ–Ω
	if t.DeadlineAt == nil {
		return true
	}

	// –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –¥–µ–¥–ª–∞–π–Ω –µ—â–µ –Ω–µ –∏—Å—Ç–µ–∫
	return time.Now().Before(*t.DeadlineAt)
}

// DaysUntilDeadline –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫
//
// TODO: –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—á–µ—Ç —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π (–∏—Å–∫–ª—é—á–∞—è –≤—ã—Ö–æ–¥–Ω—ã–µ –∏ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏)
// TODO: –î–æ–±–∞–≤–∏—Ç—å —É—á–µ—Ç —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤
func (t *Tender) DaysUntilDeadline() int {
	if t.DeadlineAt == nil {
		return -1 // –î–µ–¥–ª–∞–π–Ω –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
	}

	duration := t.DeadlineAt.Sub(time.Now())
	if duration < 0 {
		return 0 // –î–µ–¥–ª–∞–π–Ω —É–∂–µ –∏—Å—Ç–µ–∫
	}

	return int(duration.Hours() / 24)
}

// CanBeAnalyzed –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –º–æ–∂–Ω–æ –ª–∏ –ø—Ä–æ–≤–æ–¥–∏—Ç—å AI –∞–Ω–∞–ª–∏–∑ —Ç–µ–Ω–¥–µ—Ä–∞
//
// TODO: –î–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
// TODO: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
func (t *Tender) CanBeAnalyzed() bool {
	// –ù–µ–ª—å–∑—è –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —É–∂–µ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ–Ω–¥–µ—Ä—ã
	if t.AIAnalyzedAt != nil {
		return false
	}

	// –ù–µ–ª—å–∑—è –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–µ–Ω–¥–µ—Ä—ã
	if !t.IsActive() {
		return false
	}

	// –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è
	return t.Title != "" && t.Platform != ""
}

// IsRelevant –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ç–µ–Ω–¥–µ—Ä —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–º –Ω–∞ –æ—Å–Ω–æ–≤–µ AI –∞–Ω–∞–ª–∏–∑–∞
//
// TODO: –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –ø–æ—Ä–æ–≥ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
// TODO: –£—á–∏—Ç—ã–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã (—Ü–µ–Ω–∞, –∑–∞–∫–∞–∑—á–∏–∫ –∏ —Ç.–¥.)
func (t *Tender) IsRelevant() bool {
	if t.AIScore == nil {
		return false
	}

	// –ü–æ—Ä–æ–≥ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ - TODO: –≤—ã–Ω–µ—Å—Ç–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
	const relevanceThreshold = 0.7
	return *t.AIScore >= relevanceThreshold
}

// ShouldParticipate –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –æ–± —É—á–∞—Å—Ç–∏–∏ –≤ —Ç–µ–Ω–¥–µ—Ä–µ
//
// TODO: –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é –ª–æ–≥–∏–∫—É –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è
// TODO: –£—á–∏—Ç—ã–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
func (t *Tender) ShouldParticipate() bool {
	if t.AIRecommendation == nil {
		return false
	}

	return *t.AIRecommendation == RecommendationParticipate
}

// =====================================================================
// üîÑ –ú–ï–¢–û–î–´ –ò–ó–ú–ï–ù–ï–ù–ò–Ø –°–û–°–¢–û–Ø–ù–ò–Ø (COMMAND METHODS)
// =====================================================================

// SetAIAnalysis —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã AI –∞–Ω–∞–ª–∏–∑–∞
//
// TODO: –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
// TODO: –î–æ–±–∞–≤–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–º–µ–Ω–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è AIAnalysisCompleted
// TODO: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∞–≤ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
//
// –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
//   - score: –æ—Ü–µ–Ω–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –æ—Ç 0.0 –¥–æ 1.0
//   - recommendation: —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è AI
//   - reason: –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è
func (t *Tender) SetAIAnalysis(score float64, recommendation AIRecommendation, reason string) error {
	// TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é
	if score < 0.0 || score > 1.0 {
		return ErrInvalidAIScore
	}

	if !isValidRecommendation(recommendation) {
		return ErrInvalidAIRecommendation
	}

	// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞
	t.AIScore = &score
	t.AIRecommendation = &recommendation
	t.AIAnalysisReason = reason
	now := time.Now()
	t.AIAnalyzedAt = &now
	t.UpdatedAt = now

	// TODO: –î–æ–±–∞–≤–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–º–µ–Ω–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è
	// TODO: –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

	return nil
}

// UpdateStatus –∏–∑–º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å —Ç–µ–Ω–¥–µ—Ä–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
//
// TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å state machine –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
// TODO: –î–æ–±–∞–≤–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–º–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
func (t *Tender) UpdateStatus(newStatus TenderStatus) error {
	// TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
	if !isValidStatusTransition(t.Status, newStatus) {
		return ErrInvalidStatusTransition
	}

	oldStatus := t.Status
	t.Status = newStatus
	t.UpdatedAt = time.Now()

	// TODO: –î–æ–±–∞–≤–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–º–µ–Ω–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è StatusChanged
	// TODO: –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ —Å—Ç–∞—Ç—É—Å–∞

	_ = oldStatus // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
	return nil
}

// =====================================================================
// üõ°Ô∏è –ú–ï–¢–û–î–´ –í–ê–õ–ò–î–ê–¶–ò–ò
// =====================================================================

// Validate –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –ø–æ–ª–µ–π —Ç–µ–Ω–¥–µ—Ä–∞
//
// TODO: –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—Å–µ—Ö –ø–æ–ª–µ–π
// TODO: –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
// TODO: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏
func (t *Tender) Validate() error {
	var errors []string

	// –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
	if t.ExternalID == "" {
		errors = append(errors, "external ID is required")
	}

	if t.Title == "" {
		errors = append(errors, "title is required")
	}

	if t.Platform == "" {
		errors = append(errors, "platform is required")
	}

	// –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å URL
	if t.URL != "" {
		if err := validateURL(t.URL); err != nil {
			errors = append(errors, fmt.Sprintf("invalid URL: %v", err))
		}
	}

	// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
	if t.StartPrice < 0 {
		errors = append(errors, "start price cannot be negative")
	}

	// –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∞—Ç—ã
	if t.DeadlineAt != nil && t.DeadlineAt.Before(t.PublishedAt) {
		errors = append(errors, "deadline cannot be before published date")
	}

	// –ü—Ä–æ–≤–µ—Ä—è–µ–º AI –∞–Ω–∞–ª–∏–∑
	if t.AIScore != nil && (*t.AIScore < 0 || *t.AIScore > 1) {
		errors = append(errors, "AI score must be between 0 and 1")
	}

	if len(errors) > 0 {
		return fmt.Errorf("validation failed: %s", strings.Join(errors, ", "))
	}

	return nil
}

// =====================================================================
// üîß –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò –í–ê–õ–ò–î–ê–¶–ò–ò
// =====================================================================

// validateExternalID –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤–Ω–µ—à–Ω–µ–≥–æ ID
func validateExternalID(externalID string) error {
	externalID = strings.TrimSpace(externalID)
	if externalID == "" {
		return ErrEmptyExternalID
	}

	// TODO: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ñ–æ—Ä–º–∞—Ç–∞ ID –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
	// TODO: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ (—á–µ—Ä–µ–∑ repository)

	return nil
}

// validateTitle –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–µ–Ω–¥–µ—Ä–∞
func validateTitle(title string) error {
	title = strings.TrimSpace(title)
	if title == "" {
		return ErrEmptyTitle
	}

	// TODO: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–ª–∏–Ω—ã
	// TODO: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤

	return nil
}

// validatePlatform –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
func validatePlatform(platform string) error {
	validPlatforms := map[string]bool{
		string(PlatformZakupki): true,
		string(PlatformSZVO):    true,
		string(PlatformSPB):     true,
	}

	if !validPlatforms[platform] {
		return ErrInvalidPlatform
	}

	return nil
}

// validateURL –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å URL
func validateURL(rawURL string) error {
	if rawURL == "" {
		return ErrEmptyURL
	}

	parsedURL, err := url.Parse(rawURL)
	if err != nil {
		return fmt.Errorf("failed to parse URL: %w", err)
	}

	if parsedURL.Scheme == "" || parsedURL.Host == "" {
		return ErrInvalidURL
	}

	return nil
}

// isValidRecommendation –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å AI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
func isValidRecommendation(recommendation AIRecommendation) bool {
	validRecommendations := map[AIRecommendation]bool{
		RecommendationParticipate: true,
		RecommendationSkip:        true,
		RecommendationAnalyze:     true,
	}

	return validRecommendations[recommendation]
}

// isValidStatusTransition –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ–ø—É—Å—Ç–∏–º–æ—Å—Ç—å –ø–µ—Ä–µ—Ö–æ–¥–∞ –º–µ–∂–¥—É —Å—Ç–∞—Ç—É—Å–∞–º–∏
//
// TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –ª–æ–≥–∏–∫—É state machine
func isValidStatusTransition(from, to TenderStatus) bool {
	// –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ (TODO: —Ä–∞—Å—à–∏—Ä–∏—Ç—å)
	validTransitions := map[TenderStatus][]TenderStatus{
		StatusDraft:     {StatusActive, StatusCancelled},
		StatusActive:    {StatusCompleted, StatusCancelled, StatusExpired},
		StatusCompleted: {}, // –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
		StatusCancelled: {}, // –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
		StatusExpired:   {}, // –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
	}

	allowedStatuses, exists := validTransitions[from]
	if !exists {
		return false
	}

	for _, allowed := range allowedStatuses {
		if allowed == to {
			return true
		}
	}

	return false
}

// =====================================================================
// üîß –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –ú–ï–¢–û–î–´ –î–õ–Ø –£–î–û–ë–°–¢–í–ê
// =====================================================================

// String –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–Ω–¥–µ—Ä–∞
//
// TODO: –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
func (t *Tender) String() string {
	return fmt.Sprintf("Tender{ID: %d, ExternalID: %s, Title: %s, Platform: %s, Status: %s}",
		t.ID, t.ExternalID, t.Title, t.Platform, t.Status)
}

// Clone —Å–æ–∑–¥–∞–µ—Ç –≥–ª—É–±–æ–∫—É—é –∫–æ–ø–∏—é —Ç–µ–Ω–¥–µ—Ä–∞
//
// TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω–æ–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª–µ–π
func (t *Tender) Clone() *Tender {
	clone := *t // –ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

	// –ö–æ–ø–∏—Ä—É–µ–º —É–∫–∞–∑–∞—Ç–µ–ª–∏
	if t.DeadlineAt != nil {
		deadline := *t.DeadlineAt
		clone.DeadlineAt = &deadline
	}

	if t.AIScore != nil {
		score := *t.AIScore
		clone.AIScore = &score
	}

	if t.AIRecommendation != nil {
		recommendation := *t.AIRecommendation
		clone.AIRecommendation = &recommendation
	}

	if t.AIAnalyzedAt != nil {
		analyzedAt := *t.AIAnalyzedAt
		clone.AIAnalyzedAt = &analyzedAt
	}

	return &clone
}

// =====================================================================
// üéØ –ú–ï–¢–û–î–´ –î–õ–Ø –ë–ò–ó–ù–ï–°-–õ–û–ì–ò–ö–ò (–º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å)
// =====================================================================

// TODO: –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏:
//
// - CalculatePriority() int - —Ä–∞—Å—á–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ —Ç–µ–Ω–¥–µ—Ä–∞
// - GetRiskLevel() RiskLevel - –æ—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–æ–≤ —É—á–∞—Å—Ç–∏—è
// - EstimateParticipationCost() float64 - –æ—Ü–µ–Ω–∫–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —É—á–∞—Å—Ç–∏—è
// - GetCompetitionLevel() CompetitionLevel - —É—Ä–æ–≤–µ–Ω—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏
// - ShouldSendNotification() bool - –Ω—É–∂–Ω–æ –ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
// - GetRecommendedActions() []Action - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
// - CalculateTimeToParticipate() time.Duration - –≤—Ä–µ–º—è –Ω–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É
//
// –ü—Ä–∏–º–µ—Ä—ã –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è —Å–æ–±—ã—Ç–∏–π:
// - OnCreated() - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ–Ω–¥–µ—Ä–∞
// - OnAnalyzed() - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞
// - OnStatusChanged() - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
//
// –ü—Ä–∏–º–µ—Ä—ã –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π:
// - ToDTO() TenderDTO - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ DTO –¥–ª—è API
// - FromExternalData() - —Å–æ–∑–¥–∞–Ω–∏–µ –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö
// - ToAnalysisRequest() - –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è AI –∞–Ω–∞–ª–∏–∑–∞